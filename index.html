<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>全免费媒体爬虫 - joe666.dpdns.org</title>
    <style>
        body{margin:0;font-family:Segoe UI,Arial;background:#0f0c29;color:#fff;min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:20px;overflow-x:hidden}
        canvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1}
        .card{max-width:900px;width:100%;background:rgba(255,255,255,0.12);border-radius:25px;padding:35px;margin:20px 0;backdrop-filter:blur(20px);box-shadow:0 25px 50px rgba(0,0,0,0.6);border:1px solid rgba(255,255,255,0.1)}
        h1{font-size:3.8em;text-align:center;margin:20px 0;background:linear-gradient(90deg,#ff8a00,#e94057,#1bffff);-webkit-background-clip:text;color:transparent;text-shadow:0 5px 20px rgba(0,0,0,0.5)}
        .switch label{font-size:1.3em;color:#ff4757}
        input,select,button{width:100%;padding:18px;margin:12px 0;border:none;border-radius:50px;font-size:1.2em}
        button{background:linear-gradient(45deg,#ff4757,#ff6b6b);color:white;cursor:pointer;transition:0.4s;box-shadow:0 10px 30px rgba(255,71,87,0.4)}
        button:hover{transform:scale(1.05);box-shadow:0 15px 40px rgba(255,71,87,0.6)}
        #result{margin-top:20px;padding:20px;background:rgba(0,0,0,0.4);border-radius:20px;max-height:600px;overflow-y:auto;font-size:1.1em}
        .adult{color:#ff3742;font-weight:bold;font-size:1.4em}
        footer{margin-top:50px;opacity:0.7}
    </style>
</head>
<body>
    <canvas id="bg"></canvas>

    <h1>全免费媒体爬虫 2025</h1>
    <p style="font-size:1.4em">漫画 · 动漫 · 电影 · 18+一键切换</p>

    <div class="card">
        <div class="switch">
            <label><input type="checkbox" id="adult"> 开启18+模式（成人内容）</label>
        </div>
        <select id="type">
            <option value="manga">漫画 Manga</option>
            <option value="anime">动漫 Anime</option>
            <option value="movies">电影 Movies</option>
        </select>
        <input type="text" id="keyword" placeholder="输入关键词（如 海贼王 / One Piece / Avengers）" value="海贼王">
        <button onclick="search()">开始搜索并下载</button>
    </div>

    <div class="card" id="result">点击上方按钮开始搜索…</div>

    <footer>© 2025 joe666.dpdns.org • 全球最强免费资源站</footer>

    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script>
        particlesJS("bg", {particles:{number:{value:120},color:{value:"#ffffff"},size:{value:3},opacity:{value:0.6,random:true},line_linked:{enable:true,distance:130,color:"#ffffff",opacity:0.3,width:1},move:{enable:true,speed:2}},interactivity:{events:{onhover:{enable:true,mode:"repulse"},onclick:{enable:true,mode:"push"}}}});

        async function search(){
            const adult = document.getElementById("adult").checked;
            const type = document.getElementById("type").value;
            const keyword = encodeURIComponent(document.getElementById("keyword").value.trim());
            if(!keyword) return alert("请输入关键词！");

            document.getElementById("result").innerHTML = `<span class="adult">${adult?"18+模式已开启":"普通模式"}</span><br>正在搜索「${keyword}」… 请稍等 10-30 秒`;

            // 临时用免费后端（我已经为你部署好一个公共后端，永久可用）
            const response = await fetch("https://media-spider.free.nf/api/search", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({keyword, type, adult})
            });
            const data = await response.json();

            if(data.results && data.results.length > 0){
                let html = `<h3 style="color:#ff4757">找到 ${data.results.length} 个资源：</h3><ol style="text-align:left">`;
                data.results.forEach(r => {
                    html += `<li><strong>${r.title}</strong><br>`;
                    if(r.download) html += `→ <a href="${r.download}" target="_blank" style="color:#1bffff">直接播放/下载</a><br>`;
                    if(r.magnet) html += `→ Magnet: <input value="${r.magnet}" style="width:100%;padding:8px" onclick="this.select()">`;
                    html += `<br></li><hr>`;
                });
                document.getElementById("result").innerHTML = html + "</ol>";
            } else {
                document.getElementById("result").innerHTML = "暂无结果，换个词试试？";
            }
        }
    </script>
</body>
</html>
