<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>全免费资源站 - joe666.dpdns.org</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Segoe UI',Arial,sans-serif;background:#0f0c29;color:#fff;min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:20px;overflow-x:hidden}
        canvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1}
        .card{max-width:900px;width:100%;background:rgba(255,255,255,0.12);border-radius:25px;padding:35px;margin:20px 0;backdrop-filter:blur(20px);box-shadow:0 25px 50px rgba(0,0,0,0.6);border:1px solid rgba(255,255,255,0.1)}
        h1{font-size:3.8em;text-align:center;margin:20px 0;background:linear-gradient(90deg,#ff8a00,#e94057,#1bffff);-webkit-background-clip:text;color:transparent;animation:g 8s infinite}
        @keyframes g{0%{filter:hue-rotate(0deg)}100%{filter:hue-rotate(360deg)}}
        .switch label{font-size:1.3em;color:#ff4757;cursor:pointer}
        input,select,button{width:100%;padding:18px;margin:12px 0;border:none;border-radius:50px;font-size:1.2em}
        button{background:linear-gradient(45deg,#ff4757,#ff6b6b);cursor:pointer;transition:0.4s;animation:p 2s infinite}
        @keyframes p{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
        button:hover{transform:scale(1.1)}
        #result{margin-top:20px;padding:20px;background:rgba(0,0,0,0.4);border-radius:20px;max-height:600px;overflow-y:auto;display:none}
        .item{margin:20px 0;padding:20px;background:rgba(255,255,255,0.08);border-radius:15px;animation:f 0.6s forwards}
        @keyframes f{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
        .spinner{width:50px;height:50px;border:6px solid rgba(255,255,255,0.3);border-top:6px solid #ff4757;border-radius:50%;animation:s 1s linear infinite;margin:20px auto}
        @keyframes s{to{transform:rotate(360deg)}}
    </style>
</head>
<body>
    <canvas id="p"></canvas>
    <h1>全免费资源站 2025</h1>
    <p style="font-size:1.4em;margin:10px">漫画 · 动漫 · 电影 · 18+一键切换</p>

    <div class="card">
        <div class="switch"><label><input type="checkbox" id="a"> 开启18+模式</label></div>
        <select id="t"><option value="manga">漫画</option><option value="anime">动漫</option><option value="movies">电影</option></select>
        <input type="text" id="k" placeholder="输入关键词（如 海贼王 / Naruto）" value="海贼王">
        <button onclick="go()">开始搜索</button>
    </div>

    <div class="card" id="r">
        <div class="spinner"></div><p>正在搜索，请稍等 10-30 秒…</p>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script>
        particlesJS("p",{particles:{number:{value:120},color:{value:"#ffffff"},size:{value:3},opacity:{value:0.6,random:true},line_linked:{enable:true,distance:130,color:"#ffffff",opacity:0.3,width:1},move:{enable:true,speed:2}},interactivity:{events:{onhover:{enable:true,mode:"repulse"}}}});

        async function go(){
            const adult = document.getElementById("a").checked;
            const type = document.getElementById("t").value;
            const keyword = document.getElementById("k").value.trim();
            if(!keyword) return alert("请输入关键词");
            
            document.getElementById("r").style.display = "block";
            document.getElementById("r").innerHTML = '<div class="spinner"></div><p>正在搜索「'+keyword+'」…</p>';

            try {
                const res = await fetch("https://media.nanqiouheng.eu.org/api/search", {
                    method: "POST",
                    headers: {"Content-Type":"application/json"},
                    body: JSON.stringify({keyword, type, adult})
                });
                const d = await res.json();
                
                if(d.results && d.results.length>0){
                    let html = `<h3 style="color:#ff4757">找到 ${d.results.length} 个资源：</h3>`;
                    d.results.forEach((x,i)=>{
                        html += `<div class="item" style="animation-delay:${i*0.1}s"><strong>${x.title}</strong><br>`;
                        if(x.img) html += `<img src="${x.img}" style="max-width:200px;border-radius:10px"><br>`;
                        if(x.play) html += `<video src="${x.play}" controls style="width:100%;max-width:500px;border-radius:10px"></video><br>`;
                        if(x.magnet) html += `Magnet: <input value="${x.magnet}" style="width:100%" onclick="this.select()">`;
                        if(x.link) html += `<a href="${x.link}" target="_blank" style="color:#1bffff">→ 立即观看/下载</a>`;
                        html += `</div>`;
                    });
                    document.getElementById("r").innerHTML = html;
                }else{
                    document.getElementById("r").innerHTML = "<p>没找到，换个词试试～</p>";
                }
            }catch(e){
                document.getElementById("r").innerHTML = "<p style='color:#ff3742'>搜索出错，请重试</p>";
            }
        }
    </script>
</body>
</html>
