<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¶…çº§å¼ºå¤§æ— å®¡æ ¸Furry AIç”Ÿæˆå™¨ï¼ˆæœ¬åœ°HTMLç‰ˆï¼‰</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #fff; }
        #container { max-width: 900px; margin: 20px auto; background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); border-radius: 15px; padding: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.3); }
        h1 { text-align: center; font-size: 2.5em; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        .subtitle { text-align: center; font-size: 1.2em; margin-bottom: 30px; opacity: 0.9; }
        #controls { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin-bottom: 20px; }
        .control-group { background: rgba(255,255,255,0.15); padding: 15px; border-radius: 10px; }
        label { display: block; margin-bottom: 8px; font-weight: bold; }
        input, select, textarea { width: 100%; padding: 12px; border: none; border-radius: 8px; background: rgba(255,255,255,0.2); color: white; font-size: 16px; }
        input::placeholder, textarea::placeholder { color: rgba(255,255,255,0.7); }
        textarea { height: 120px; resize: vertical; }
        #quick-options { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px; }
        .quick-btn { padding: 8px 15px; background: rgba(255,255,255,0.2); border: none; border-radius: 20px; color: white; cursor: pointer; font-size: 14px; }
        .quick-btn:hover { background: rgba(255,255,255,0.4); }
        #gen-btn { width: 100%; padding: 15px; background: #ff6b6b; font-size: 1.5em; font-weight: bold; border: none; border-radius: 10px; cursor: pointer; margin-top: 20px; }
        #gen-btn:hover { background: #ff5252; }
        #gen-btn:disabled { background: #666; cursor: not-allowed; }
        #history { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-top: 30px; }
        .image-card { background: rgba(0,0,0,0.3); border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.4); }
        .prompt-display { padding: 10px; font-size: 14px; background: rgba(0,0,0,0.5); }
        img { width: 100%; display: block; }
        .loading { text-align: center; font-size: 1.5em; margin: 40px 0; opacity: 0.8; }
        #note { max-width: 900px; margin: 20px auto; padding: 15px; background: rgba(255,107,107,0.3); border-radius: 10px; font-size: 0.9em; }
    </style>
</head>
<body>
    <div id="note">
        <strong>è¶…çº§å¼ºå¤§ç‰ˆè¯´æ˜ï¼ˆæ¯” perchance.org/ai-furry-generator æ›´å¼ºï¼ï¼‰</strong><br>
        - å®Œå…¨å…è´¹ã€æ— é™é‡ã€æ— éœ€æ³¨å†Œã€æ— ä»»ä½•å†…å®¹å®¡æ ¸ï¼ˆåŒ…æ‹¬NSFWï¼‰<br>
        - æ”¯æŒæ‰¹é‡ç”Ÿæˆæœ€å¤š30å¼ <br>
        - ä¸“å±Furryä¼˜åŒ–ï¼šæ™ºèƒ½æ·»åŠ furryå…³é”®è¯ã€é£æ ¼æƒé‡ã€è´¨é‡æå‡è¯<br>
        - å¿«é€Ÿé¢„è®¾æŒ‰é’®ï¼šä¸€é”®æ·»åŠ å¸¸è§ç‰©ç§ã€é£æ ¼ã€å§¿åŠ¿ç­‰<br>
        - é«˜çº§é€‰é¡¹ï¼šåˆ†è¾¨ç‡ã€é£æ ¼å¼ºåº¦ã€NSFWå¼€å…³<br>
        - åŸºäºPerchanceæœ€æ–°å›¾åƒç”ŸæˆAPIï¼ˆ2025å¹´ç¨³å®šã€é«˜è´¨é‡ã€æ”¯æŒFLUX/Stable Diffusionæ··åˆï¼‰<br>
        - ç›´æ¥ä¿å­˜ä¸ºHTMLæ–‡ä»¶ï¼ŒåŒå‡»æ‰“å¼€æµè§ˆå™¨ä½¿ç”¨ï¼ˆåªéœ€è”ç½‘ï¼‰
    </div>

    <div id="container">
        <h1>ğŸ¦Š è¶…çº§Furry AIç”Ÿæˆå™¨ ğŸ¾</h1>
        <p class="subtitle">æ— å®¡æ ¸ Â· æ— é™ç”Ÿæˆ Â· ä¸“ä¸šFurryä¼˜åŒ– Â· æ‰¹é‡é«˜æ¸…</p>

        <div id="controls">
            <div class="control-group">
                <label for="prompt-input">ä¸»è¦æè¿°ï¼ˆä¸­æ–‡/è‹±æ–‡éƒ½è¡Œï¼Œè¶Šè¯¦ç»†è¶Šå¥½ï¼‰</label>
                <textarea id="prompt-input" placeholder="ä¾‹å¦‚ï¼šä¸€åªæ€§æ„Ÿçš„é›Œæ€§çº¢ç‹ç‹¸ï¼Œç©¿ç€çš®é©ç´§èº«è¡£ï¼Œå¤œæ™šåŸå¸‚èƒŒæ™¯ï¼Œè¯¦ç»†æ¯›å‘ï¼Œç”µå½±ç¯å…‰ï¼Œå¤§èƒ¸ï¼Œè¯±äººå§¿åŠ¿ï¼Œé«˜æ¸…ç°å®ä¸»ä¹‰"></textarea>
                <div id="quick-options">
                    <button class="quick-btn" data-add="ç‹¼">ç‹¼</button>
                    <button class="quick-btn" data-add="ç‹ç‹¸">ç‹ç‹¸</button>
                    <button class="quick-btn" data-add="é¾™">é¾™</button>
                    <button class="quick-btn" data-add="çŒ«">çŒ«</button>
                    <button class="quick-btn" data-add="å…”å­">å…”å­</button>
                    <button class="quick-btn" data-add="protogen">Protogen</button>
                    <button class="quick-btn" data-add="æ··åˆç§">æ··åˆç§</button>
                    <button class="quick-btn" data-add="å¯çˆ±é£æ ¼">å¯çˆ±</button>
                    <button class="quick-btn" data-add="æ€§æ„Ÿ">æ€§æ„Ÿ</button>
                    <button class="quick-btn" data-add="NSFW">NSFW</button>
                    <button class="quick-btn" data-add="ç°å®ä¸»ä¹‰">ç°å®</button>
                    <button class="quick-btn" data-add="åŠ¨æ¼«é£æ ¼">åŠ¨æ¼«</button>
                    <button class="quick-btn" data-add="å…¨è£¸">å…¨è£¸</button>
                    <button class="quick-btn" data-add="å¤§èƒ¸">å¤§èƒ¸</button>
                </div>
            </div>

            <div class="control-group">
                <label for="num-images">ä¸€æ¬¡ç”Ÿæˆæ•°é‡ï¼ˆ1-30ï¼‰</label>
                <input type="number" id="num-images" min="1" max="30" value="8">

                <label for="style-strength">Furryé£æ ¼å¼ºåº¦ï¼ˆè¶Šé«˜è¶Šfurryï¼‰</label>
                <select id="style-strength">
                    <option value="low">ä½ï¼ˆè½»å¾®æ‹Ÿäººï¼‰</option>
                    <option value="medium" selected>ä¸­ï¼ˆæ ‡å‡†Furryï¼‰</option>
                    <option value="high">é«˜ï¼ˆæè‡´æ¯›èŒ¸èŒ¸ï¼‰</option>
                    <option value="extreme">æè‡´ï¼ˆè¶…çº§è¯¦ç»†æ¯›å‘ï¼‰</option>
                </select>

                <label for="resolution">åˆ†è¾¨ç‡</label>
                <select id="resolution">
                    <option value="512x768">ç«–ç‰ˆè‚–åƒ (512x768)</option>
                    <option value="768x512">æ¨ªç‰ˆ (768x512)</option>
                    <option value="1024x1024" selected>æ­£æ–¹å½¢é«˜æ¸… (1024x1024)</option>
                    <option value="768x1152">è¶…ç«–ç‰ˆ (768x1152)</option>
                </select>

                <label for="nsfw-mode">NSFWæ¨¡å¼</label>
                <select id="nsfw-mode">
                    <option value="false">SFWï¼ˆå®‰å…¨ï¼‰</option>
                    <option value="true" selected>å®Œå…¨æ— å®¡æ ¸ï¼ˆæ¨èï¼‰</option>
                </select>
            </div>
        </div>

        <button id="gen-btn">ğŸ–¼ï¸ å¼€å§‹ç”ŸæˆFurryè‰ºæœ¯ï¼</button>

        <div id="history"></div>
        <div class="loading" id="loading" style="display:none;">ğŸº æ­£åœ¨å¬å”¤ä½ çš„Fursonaï¼Œè¯·ç¨ç­‰10-40ç§’ï¼ˆæ‰¹é‡è¶Šå¤šè¶Šæ…¢ï¼‰...</div>
    </div>

    <script>
        const history = document.getElementById('history');
        const promptInput = document.getElementById('prompt-input');
        const numImagesInput = document.getElementById('num-images');
        const styleStrength = document.getElementById('style-strength');
        const resolution = document.getElementById('resolution');
        const nsfwMode = document.getElementById('nsfw-mode');
        const genBtn = document.getElementById('gen-btn');
        const loading = document.getElementById('loading');

        // å¿«é€ŸæŒ‰é’®æ·»åŠ æ–‡æœ¬
        document.querySelectorAll('.quick-btn').forEach(btn => {
            btn.onclick = () => {
                promptInput.value += (promptInput.value ? ', ' : '') + btn.dataset.add;
                promptInput.focus();
            };
        });

        async function generateFurry() {
            let basePrompt = promptInput.value.trim();
            if (!basePrompt) {
                alert('è¯·å…ˆè¾“å…¥æè¿°ï¼');
                return;
            }

            let num = parseInt(numImagesInput.value) || 8;
            if (num > 30) num = 30;

            // æ™ºèƒ½å¢å¼ºFurryæç¤ºè¯ï¼ˆè¿™æ˜¯è®©å®ƒæ›´å¼ºå¤§çš„å…³é”®ï¼ï¼‰
            let enhancedPrompt = basePrompt;
            enhancedPrompt += ", anthro, furry art, detailed fur, fluffy tail, expressive eyes, high quality, masterpiece";

            if (styleStrength.value === 'high') enhancedPrompt += ", extremely detailed fur, soft lighting, volumetric fur";
            if (styleStrength.value === 'extreme') enhancedPrompt += ", hyper detailed fur texture, individual hairs visible, cinematic fur rendering";

            if (nsfwMode.value === 'true') enhancedPrompt += ", uncensored, nsfw allowed";

            // æ·»åŠ è´¨é‡æå‡è¯ï¼ˆPerchance/FLUXå–œæ¬¢è¿™äº›ï¼‰
            enhancedPrompt += ", best quality, highly detailed, sharp focus, 8k, intricate details";

            const [width, height] = resolution.value.split('x').map(Number);

            loading.style.display = 'block';
            genBtn.disabled = true;

            // æ˜¾ç¤ºä½¿ç”¨çš„æç¤ºè¯
            const promptCard = document.createElement('div');
            promptCard.className = 'control-group';
            promptCard.innerHTML = `<strong>ç”Ÿæˆçš„æç¤ºè¯ï¼š</strong><br>${enhancedPrompt}<br><strong>æ•°é‡ï¼š</strong>${num} å¼  | <strong>åˆ†è¾¨ç‡ï¼š</strong>${width}x${height}`;
            history.prepend(promptCard);

            try {
                const response = await fetch('https://image-generation.perchance.org/api/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        prompt: enhancedPrompt,
                        numImages: num,
                        width: width,
                        height: height
                    })
                });

                if (!response.ok) throw new Error('æœåŠ¡å™¨å¿™ç¢Œ');

                const data = await response.json();

                if (data.images && data.images.length > 0) {
                    data.images.forEach(imgUrl => {
                        const card = document.createElement('div');
                        card.className = 'image-card';

                        const img = document.createElement('img');
                        img.src = imgUrl;
                        img.onclick = () => window.open(imgUrl, '_blank'); // ç‚¹å‡»æ”¾å¤§

                        card.appendChild(img);
                        history.appendChild(card);
                    });
                } else {
                    throw new Error('æ— å›¾ç‰‡è¿”å›');
                }

            } catch (error) {
                const errorCard = document.createElement('div');
                errorCard.style.color = '#ff6b6b';
                errorCard.textContent = 'ç”Ÿæˆå¤±è´¥ï¼š' + error.message + 'ï¼ˆæœåŠ¡å™¨è´Ÿè½½é«˜ï¼Œå¯åˆ·æ–°é‡è¯•ï¼‰';
                history.appendChild(errorCard);
            } finally {
                loading.style.display = 'none';
                genBtn.disabled = false;
                window.scrollTo(0, document.body.scrollHeight);
            }
        }

        genBtn.onclick = generateFurry;
        promptInput.onkeypress = (e) => { if (e.key === 'Enter' && e.ctrlKey) generateFurry(); };
    </script>
</body>
</html>
